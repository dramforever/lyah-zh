# 初见函数

（译者注：前方不能理解者请找自己数学老师问，谢谢）

上节中我们找了找函数调用的感觉。从现在开始我们要造自己的函数了！打开你的文本编辑器并输入这个将一个数变为它的两倍的函数

    doubleMe x = x + x  

函数定义的方式跟它被调用的方式很像，先写出函数名，写上空格分割的参数，但是定义嘛，要写个`=`，再写上函数主体和。把它存为`baby.hs`之类的（译者注：注意别带着`.txt`）现在切换到存着它的目录并在那里运行`ghci`。启动GHCi后（译者注：我这里GHCi启动得3秒，是不是太渣了？）输入`:l baby`载入我们的程序后就可以玩一玩我们的函数。

    ghci> :l baby  
    [1 of 1] Compiling Main             ( baby.hs, interpreted )  
    Ok, modules loaded: Main.  
    ghci> doubleMe 9  
    18  
    ghci> doubleMe 8.3  
    16.6   

因为`+`既适用于整数又适用于浮点数（其实是个数的都适用），我们的函数也适用于任何数。咱们现在写一个把两个数乘2再加起来的函数

    doubleUs x y = x*2 + y*2   

你懂的。我们其实也可以把它定义成`doubleUs x y = x + x + y + y`。试验表明这个函数还不错。（记得把它加到`baby.hs`后面，保存，在GHCi里输入`:l baby`）。

    ghci> doubleUs 4 9  
    26  
    ghci> doubleUs 2.3 34.2  
    73.0  
    ghci> doubleUs 28 88 + doubleMe 123  
    478  

效果不错。事实上，我们也可以从自己的函数里调用其它自己的函数。利用这点，我们可以重新定义`doubleUs`：

    doubleUs x y = doubleMe x + doubleMe y   

这是一个你会见一辈子的Haskell编程的一种模式。先写一些肯定对的函数，再将它们组合起来成为更复杂的函数。这样也能避免重复代码。如果有个逗比发现2应该是3，而你必须该你的代码怎么办？你可以直接把`doubleMe`改成`x + x + x`，而因为`doubleUs`调用`doubleMe`，它也会在这个2是3的奇葩世界里正常运行。

Haskell不关心函数定义的顺序，也就是说先写`doubleMe`再写`doubleUs`也行，反过来也行。

现在我们要写一个只把小于100的数加倍的函数，因为大于100的数已经够大了。

    doubleSmallNumber x = if x > 100  
                            then x  
                            else x*2   

我们在这里介绍了Haskell的if语句。你可能已经把别的某种语言的if搞得滚瓜烂熟了，但是Haskell的if语句很不一样，不同点——吓你一跳——是Haskell里else是必须写的。在C里你如果发现条件不成立你可以直接跳过一大长串指令。但是在Haskell里一个表达式必须有个值！我们其实也可以把那个if写进一行里，但是我还是觉得这样很好看。另一件关于if的事情是Haskell里if是个表达式。任何一个有值的东西都可以叫表达式。`5`是一个表达式，因为它的值是`5`，`4 + 8`是个表达式，`x + y`也是个表达式，因为它代表`x`和`y`的和。因为你必须写else部分，所以一个if一定会有个值，这也就是为什么它是表达式。如果我想把整个函数的返回值加1我们可以这样表示这个函数：

    doubleSmallNumber' x = (if x > 100 then x else x*2) + 1  

如果我们没写括号，Haskell就会把`x*2`给加1。注意函数名后面有个`'`。那个单引号真的没有什么特殊的含义，它只是个函数名里的字符。我们一般用`'`来表示这是个严格（不懒）的函数（译者注：这个你得往后看才能知道它是什么意思，你要问数学老师可能问不到。）或者和不带`'`的不太一样的一个函数或变量。因为'是一个函数名中的字符而已，我们也可以写这个奇葩函数：

    conanO'Brien = "It's a-me, Conan O'Brien!"   

这里有两件事值得注意。第一件事是我们没把c大写，因为函数名不能以大写字母开始，我们以后再说为什么。第二件事是这个函数不接受任何参数。如果一个函数不接受任何参数我们一般把它叫做一个定义。因为我们一旦定义一个函数就不能修改它，所以`conanO'Brien`和字符串`"It's a-me, Conan O'Brien!"`是等价的。 
